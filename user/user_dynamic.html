<!DOCTYPE html>
<html>
  <head>
    <title>Mikrotik User Manager - VORB</title>
    <meta charset="utf-8" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../css/output.css" rel="stylesheet" />
    <script src="../js/generic.js"></script>
    <script src="../js/user.js"></script>
  </head>
  <body
    class="min-h-svh py-8 flex flex-col items-center justify-center relative text-black"
    style="
      background-image: url('../img/bg-02.webp');
      background-size: cover;
      background-position: center;
    "
  >
    <!-- Background overlay -->
    <div
      class="absolute inset-0 bg-gradient-to-b from-white via-zinc-100/70 to-white/90 z-0"
    ></div>

    <!-- Global blocker -->
    <div id="global-blocker" class="fixed inset-0 z-50 flex items-center justify-center" style="visibility:hidden">
        <div class="absolute inset-0 bg-gray-500 opacity-40"></div>
        <div class="relative bg-white p-4 rounded-md shadow-lg">
            <img src="../img/ajax-loader.gif" />
        </div>
    </div>

    <!-- Main content -->
    <div class="relative z-10 w-full max-w-5xl mx-auto px-4 [&_a]:hover:text-teal-700">
      <div class="flex flex-col items-center">
        <!-- Logo -->
        <div class="text-teal-600 flex flex-col justify-end items-end leading-8 mb-6">
          <p class="text-[58px] font-bold">VORB</p>
          <p class="mr-1">ONE</p>
        </div>

        <!-- Header with menu -->
        <div class="bg-white/70 rounded-md px-6 py-4 w-full shadow-lg mb-6">
          <div class="flex items-center justify-between">
            <img src="../img/mikrotik_logo.png" class="h-6" alt="Mikrotik Logo" />
            <nav class="hidden md:flex space-x-6">
              <a id="menu-status" href="#" onclick="onMenuClick(this); return false;" class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Status</a>
              <a id="menu-sessions" href="#" onclick="onMenuClick(this); return false;" class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Sessions</a>
              <!-- <a id="menu-payments" href="#" onclick="onMenuClick(this); return false;" class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Payments</a> -->
              <a id="menu-profiles" href="#" onclick="onMenuClick(this); return false;" class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Profiles</a>
              <a id="menu-logout" href="#" onclick="onMenuClick(this); return false;" class="text-red-600 hover:text-red-800 font-medium transition-colors">Logout</a>
            </nav>
            <!-- Mobile menu button -->
            <label for="show-menu" class="md:hidden text-teal-600 font-medium cursor-pointer">Menu</label>
            <input type="checkbox" id="show-menu" class="hidden" role="button">
          </div>

          <!-- Mobile menu -->
          <div class="md:hidden mt-4 space-y-1" id="mobile-menu" style="display: none;">
            <a id="menu-status" href="#" onclick="onMenuClick(this); return false;" class="block text-teal-600 hover:text-teal-800 font-medium py-1 transition-colors">Status</a>
            <a id="menu-sessions" href="#" onclick="onMenuClick(this); return false;" class="block text-teal-600 hover:text-teal-800 font-medium py-1 transition-colors">Sessions</a>
            <!-- <a id="menu-payments" href="#" onclick="onMenuClick(this); return false;" class="block text-teal-600 hover:text-teal-800 font-medium py-1 transition-colors">Payments</a> -->
            <a id="menu-profiles" href="#" onclick="onMenuClick(this); return false;" class="block text-teal-600 hover:text-teal-800 font-medium py-1 transition-colors">Profiles</a>
            <a id="menu-logout" href="#" onclick="onMenuClick(this); return false;" class="block text-red-600 hover:text-red-800 font-medium py-1 transition-colors">Logout</a>
          </div>
        </div>

        <!-- Container for views -->
        <div id="container" class="bg-white/70 rounded-md px-6 py-6 w-full shadow-lg">
        <!-- STATUS VIEW -->
        <div class="container-view" id="status" style="display: none;">
            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Données utilisateur
            </h4>
            <div class="mb-6">
                <table id="status-data" class="w-full border-collapse p-1">
                </table>
            </div>

            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Profils utilisateur
            </h4>
            <div class="mb-6 overflow-x-auto border border-gray-300 rounded-md p-1 [&_th]:text-left">
                <table id="status-profiles" class="w-full border-collapse rounded-md max-md:text-sm">
                </table>
            </div>

            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Profils expirés
            </h4>
            <div class="overflow-x-auto border border-gray-300 rounded-md p-1 [&_th]:text-left">
                <table id="status-exp-profiles" class="w-full border-collapse rounded-md max-md:text-sm">
                </table>
            </div>
        </div>

        <!-- SESSIONS VIEW -->
        <div class="container-view" id="sessions" style="display: none;">
            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Sessions
            </h4>
            <div class="overflow-x-auto border border-gray-300 rounded-md p-1 [&_th]:text-left">
                <table id="sessions-sessions" class="w-full border-collapse rounded-md text-sm">
                </table>
            </div>
        </div>

        <!-- PAYMENTS VIEW -->
        <div class="container-view" id="payments" style="display: none;">
            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Paiements
            </h4>
            <div class="overflow-x-auto border border-gray-300 rounded-md p-1 [&_th]:text-left">
                <table id="payments-payments" class="w-full border-collapse rounded-md text-sm">
                </table>
            </div>
        </div>

        <!-- PROFILES VIEW -->
        <div class="container-view" id="profiles" style="display: none;">
            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Tous les profils
            </h4>
            <div class="overflow-x-auto border border-gray-300 rounded-md p-1 [&_th]:text-left">
                <table id="profiles-profiles" class="w-full border-collapse rounded-md">
                </table>
            </div>
        </div>

        <!-- PROFILE VIEW -->
        <div class="container-view" id="profile" style="display: none;">
            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Données du profil
            </h4>
            <div class="mb-6">
                <table id="profile-data" class="w-full border-collapse">
                </table>
            </div>

            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Limites du profil
            </h4>
            <div id="profile-limits" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Limites de bande passante -->
                <div class="bg-gray-50 p-4 rounded-md">
                    <h5 class="font-semibold text-gray-700 mb-2">Bande passante</h5>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Limite Download:</span>
                            <span id="profile-limit-download" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Limite Upload:</span>
                            <span id="profile-limit-upload" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Débit Max Download:</span>
                            <span id="profile-rate-download" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Débit Max Upload:</span>
                            <span id="profile-rate-upload" class="font-medium">-</span>
                        </div>
                    </div>
                </div>

                <!-- Limites temporelles -->
                <div class="bg-gray-50 p-4 rounded-md">
                    <h5 class="font-semibold text-gray-700 mb-2">Temps et sessions</h5>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Sessions simultanées:</span>
                            <span id="profile-max-sessions" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Temps total autorisé:</span>
                            <span id="profile-uptime-limit" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Temps par session:</span>
                            <span id="profile-session-time" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Validité:</span>
                            <span id="profile-validity-display" class="font-medium">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BUY PROFILE -->
        <div class="container-view" id="buyprofile" style="display: none;">
            <h4 class="text-xl font-semibold text-teal-700 mb-4 border-b border-teal-200 pb-2">
                Acheter un profil
            </h4>
            <div id="buyprofile-buyprofile" class="bg-gray-50 p-4 rounded-md">
            </div>
        </div>

        <!-- REDIRECTING VIEW -->
        <div class="container-view" id="redirecting" style="display: none; text-align: center; padding: 2rem;">
            <div class="flex flex-col items-center space-y-4">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"></div>
                <p class="text-gray-600">Processus de paiement démarré. Redirection vers PayPal. Veuillez patienter...</p>
            </div>
        </div>
      </div>

      <p class="text-zinc-500 text-xs mt-8 text-center">
        Powered by Bertin Selendo
      </p>
    </div>

    <script>
      // Toggle mobile menu visibility
      document.getElementById('show-menu').addEventListener('change', function() {
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenu.style.display = this.checked ? 'block' : 'none';
      });
    </script>
  </body>
</html>
